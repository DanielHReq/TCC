#:kivy 1.11.0

<Gerenciador>:
	Menu:
		name:'telaMenu'
	CriaMapa:
        name:'telaConfigMapa'
    Lista:
        name:'telaListaMapa'
	Mapa:
        name:'telaMapa'

<Menu>:
	FloatLayout:
		BoxLayout:
			orientation:'vertical'
			padding:120,0,120,100
			spacing:25
			BoxLayout:
				size_hint_y:3
				Image:
					source:'../assets/logo.png'
					texture:self.texture
					allow_stretch:True
			Button:
#				background_color:(.8,.8,.8,1)
				text:'Criar um mapa'
				on_release:app.root.current = 'telaConfigMapa'
			Button:
				text:'Listar mapas'
				on_release:app.root.current = 'telaListaMapa'
			Button:
				text:'Sair'
				on_release:app.stop()
		Button:
			text:'Config'
			size_hint_y:None
			size_hint_x:None
			height:40
			width:40
			pos:(root.width-40,0)
			on_release:app.corFundo()

<Lista>:
	FloatLayout:
		BoxLayout:
			orientation:'vertical'
			pos_hint:{'top':0.95}
			spacing:25
			Label:
				size_hint_y:None
				size:self.texture_size
				font_size:40
				text:'Mapas'
			BoxLayout:
				orientation:'vertical'
				size_hint_x:0.8
				pos_hint:{'x':0.1,'y':0}
				BoxLayout:
					size_hint_y:None
					height:30
					TextInput:
						id:pesquisa
					Button:
						size_hint_x:0.2
						text:'Ir'
						on_release:root.pesquisa_lista()
					CheckBox:
						id:cb_mapas
						active:True
						size_hint_x:None
						on_press:root.pesquisa_lista()
					Label:
						text:'Mapas'
						font_size:14
						size_hint_x:None
						size:self.texture_size
					CheckBox:
						id:cb_coletaneas
						active:True
						size_hint_x:None
						on_press:root.pesquisa_lista()
					Label:
						text:'Coletâneas'
						font_size:14
						size_hint_x:None
						size:self.texture_size
				ScrollView:
					BoxLayout:
						id:scrollbox
						orientation:'vertical'
						size_hint_y:None
						height:self.minimum_height
	# MAPAS E COLETÂNEAS ENTRAM AQUI
		Button:
			text:'Voltar'
			size_hint_y:None
			size_hint_x:None
			height:40
			width:40
			pos:(root.width-40,0)
			on_release:app.root.current = 'telaMenu'

<ItemLista>:
	size_hint_y:None
	height:200
	Image:
		id:imagembox
		size_hint_x:None
		size:200,200
	Label:
		id:listabox
		font_size:30

<CriaMapa>:
	FloatLayout:
		BoxLayout:
			orientation:'vertical'
			size_hint_y:0.8
			pos_hint:{'y':0.15}
			spacing:25
			Label:
				size_hint_y:None
				size:self.texture_size
				font_size:40
				text:'Configurações do Novo Mapa'
			BoxLayout:
				orientation:'vertical'
				size_hint_x:0.8
				pos_hint:{'x':0.1,'y':0}
				BoxLayout:
					size_hint_y:None
					height:30
					CheckBox:
						size_hint_x:.2
						active:False
						group:'grupo_criacao'
						on_press:root.mostra_box(1)
					Label:
						halign:'left'
						text_size:self.size
						text:'Criar mapa'
						size:self.texture_size
				BoxLayout:
					size_hint_y:None
					height:30
					CheckBox:
						size_hint_x:.2
						active:False
						group:'grupo_criacao'
						on_press:root.mostra_box(2)
					Label:
						halign:'left'
						text_size:self.size
						text:'Criar mapa e guardá-lo em uma coletânea existente'
						size:self.texture_size
				BoxLayout:
					size_hint_y:None
					height:30
					CheckBox:
						size_hint_x:.2
						active:False
						group:'grupo_criacao'
						on_press:root.mostra_box(3)
					Label:
						halign:'left'
						text_size:self.size
						text:'Criar mapa e guardá-lo em uma nova coletânea'
						size:self.texture_size
				BoxLayout:
					padding:[0,10,0,0]
					ScrollView:
						BoxLayout:
							id:box_criacao
							padding:20
							canvas.after:
								Color:
									rgba:.9,.9,.9,1
								Line:
									width:2
									rectangle:self.x,self.y,self.width,self.height
		Button:
			text:'Voltar'
			size_hint_y:None
			size_hint_x:None
			height:40
			width:40
			pos:(root.width-40,0)
			on_release:app.root.current = 'telaMenu'

<BoxCriacao>:
	id:box_criacao2
	orientation:'vertical'
	spacing:10
	
	

<BoxSpinner>:
	id:box_spinner
	size_hint_y:None
	height:30
	Label:
		text:'Procurar coletânia: '
	Spinner:
		id:spinner_coletanea
		text:'sem coletânea'

<BoxNovaCol>:
	id:box_col
	size_hint_y:None
	height:30
	Label:
		text:'Nome do Mapa: '
	TextInput:
		id:nome_col

<BoxNome>:
	id:box_nome
	size_hint_y:None
	height:30
	Label:
		text:'Nome do Mapa: '
	TextInput:
		id:nome_mapa

<BoxSVideo>:
	id:box_video
	size_hint_y:None
	Label:
		text:'Salvar video de todo o percurso: '
	CheckBox:
		active:False







<Mapa>:
    clicavel:pin_layout
    ScatterLayout:
        auto_bring_to_front:False
        id:pin_layout
        Image:
			id:image_mapa
            size:self.texture_size
            allow_stretch:True
            keep_ratio:True

    FloatLayout:
        GridLayout:
            orientation:'vertical'
            pos_hint:{'x':0,'center_y':.5}
            size_hint:(None,None)
            cols:1
            col_default_width:50
            col_force_default:True
            row_default_height:50
            row_force_default:True
            Button:
                id:btn_add_pin
                on_press:root.novo_pin()
                background_color:(.25,.3,1,.3)
                Image:
                    source:'../../ink/pin_mais.png'
                    pos:(self.parent.pos[0]+2/12*self.parent.width,self.parent.pos[1]+1/8*self.parent.height)
                    size:(self.parent.width*3/4,self.parent.height*3/4)
                    allow_stretch:True
            Button:
                id:unselect
                on_press:root.unselect()
                background_color:(.25,.3,1,.3)
            Button:
                id:print_cam
                background_color:(.25,.3,1,.3)
                Image:
                    source:'../assets/camera_icon3.png'
                    pos:self.parent.pos
                    size:self.parent.size
                    allow_stretch:True
		Button:
			size_hint:(None,None)
			pos_hint:{'x':0,'y':0}
			size:(110,40)
			text:'Salvar e Voltar'
			on_release:app.root.current = 'telaMenu'

<Pin>:
    id:pin_hitbox
    size_hint:(None,None)
    size:(15,30)
    canvas:
        Rectangle:
            source:'../../ink/pin_color.png'
            pos:self.pos
            size:self.size
    Image:
        source:'../../ink/pin.png'
        allow_stretch:True

<PinInfo>:
    Label:
        text:'???'

<Click>:
    id:ball
    size_hint:None,None
    size:(8,8)
    canvas:
        Ellipse:
            pos:self.pos
            size:self.size
